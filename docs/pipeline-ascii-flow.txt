GitHub Release Monitor - Concourse Pipeline Flow
=================================================

MAIN PIPELINE (Automatic):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               MONITORING PHASE                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â° Timer (1h) â”€â”
               â”œâ”€â”€â–º ğŸ” monitor-releases
ğŸ—‚ï¸ Git Repo â”€â”€â”€â”˜        â”‚
                        â–¼
                   ğŸ“‹ check-releases task
                        â”‚ (REPOSITORIES_OVERRIDE)
                        â”‚ (GITHUB_TOKEN)
                        â–¼
                   ğŸ“œ scripts/monitor.sh
                        â”‚ â”€â”€â–º github_monitor.py
                        â–¼
                   ğŸ™ GitHub API calls
                        â”‚ (check repositories)
                        â–¼
                   ğŸ“„ releases.json
                        â”‚ (new releases found)
                        â–¼
                   â˜ï¸ S3: latest-releases.json

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               DOWNLOAD PHASE                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â˜ï¸ S3: latest-releases.json (trigger)
ğŸ—‚ï¸ Git Repo â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”œâ”€â”€â–º â¬‡ï¸ download-new-releases
                              â”‚
                              â–¼
                         ğŸ“¥ download-releases task
                              â”‚ (VERSION_DB_S3_BUCKET)
                              â”‚ (ASSET_PATTERNS)
                              â”‚ (REPOSITORY_OVERRIDES)
                              â–¼
                         ğŸ“œ download_releases.py
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼         â–¼         â–¼
              â˜ï¸ S3 Version   ğŸ™ GitHub    ğŸ“ /tmp/downloads
                Database      Downloads   (local files)
                    â”‚                           â”‚
                    â”‚                           â–¼
                    â”‚                      â˜ï¸ upload-to-s3 task
                    â”‚                           â”‚ (S3_ENDPOINT)
                    â”‚                           â”‚ (S3_BUCKET)
                    â”‚                           â–¼
                    â”‚                      ğŸ“œ upload-to-s3.py
                    â”‚                           â”‚ (or upload-to-s3-mc.py)
                    â”‚                           â–¼
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â˜ï¸ S3 Release Storage
                                              (artifacts bucket)

UTILITY JOBS (Manual):
======================

ğŸ—‘ï¸ clear-version-database:
   ğŸ“œ clear-version-db.py â”€â”€â–º â˜ï¸ S3 Version Database (clear all)

ğŸ”„ force-download-repo (param: REPO_NAME):
   ğŸ“œ clear-version-entry.py â”€â”€â–º â˜ï¸ S3 Version DB (clear specific repo)
   ğŸ“‹ check-releases â”€â”€â–º ğŸ“¥ download-releases â”€â”€â–º â˜ï¸ upload-to-s3


ENVIRONMENT VARIABLES:
======================

Core Configuration:
  REPOSITORIES_OVERRIDE    - JSON array of repos to monitor
  GITHUB_TOKEN            - GitHub API authentication
  
S3 Configuration:
  S3_ENDPOINT             - S3-compatible endpoint
  S3_USE_MC               - Use MinIO client vs boto3
  VERSION_DB_S3_BUCKET    - Version database bucket
  S3_BUCKET               - Release artifacts bucket
  S3_SKIP_SSL_VERIFICATION - Skip SSL for S3-compatible

Download Configuration:
  ASSET_PATTERNS          - File patterns to download
  REPOSITORY_OVERRIDES    - Per-repo download settings
  INCLUDE_PRERELEASES     - Include pre-release versions


DATA FLOW SUMMARY:
==================

1. Timer triggers monitoring every hour
2. Monitor checks GitHub for new releases
3. Results stored in S3 (latest-releases.json)
4. Download job triggered by new results
5. Downloads assets and updates version database
6. Uploads downloaded files to S3 storage

Key Features:
- S3-compatible storage support (MinIO, etc.)
- Version tracking prevents re-downloads
- Configurable repository lists and download patterns
- Manual jobs for testing and maintenance